// Generated by CoffeeScript 2.5.1
var SCALE, VERSION, cx, cy, data, draw, img, locationUpdateFail, mapName, messages, params, preload, released, setup, start, startX, startY, state, touchEnded, touchMoved, touchStarted;

VERSION = 236;

released = true;

mapName = ""; // t ex skarpn√§ck

params = null;

start = new Date();

state = 0; // 0=uninitialized 1=normal 2=info

data = null;

img = null;

startX = 0;

startY = 0;

Array.prototype.clear = function() {
  return this.length = 0;
};

[cx, cy] = [
  0,
  0 // center (image coordinates)
];

SCALE = 1;

messages = ['', '', '', '', '', ''];

preload = function() {
  params = getParameters();
  mapName = "2020-SommarS";
  // if params.debug then dump.active = params.debug == '1'
  return loadJSON(`data/${mapName}.json`, function(json) {
    var control, key, ref;
    data = json;
    console.log('adam', data);
    ref = data.controls;
    for (key in ref) {
      control = ref[key];
      control.push("");
      control.push(0);
      control.push(0);
    }
    return img = loadImage("data/" + data.map);
  });
};

locationUpdateFail = function(error) {
  if (error.code === error.PERMISSION_DENIED) {
    return messages = ['', '', '', '', '', 'Check location permissions'];
  }
};

setup = function() {
  var canvas;
  canvas = createCanvas(innerWidth - 0.0, innerHeight); //-0.5
  canvas.position(0, 0); // hides text field used for clipboard copy.
  SCALE = data.scale;
  return [cx, cy] = [img.width / 2, img.height / 2];
};

draw = function() {
  var x, y;
  bg(0, 1, 0);
  if (state === 0) {
    textSize(100);
    textAlign(CENTER, CENTER);
    x = width / 2;
    y = height / 2;
    text(mapName, x, y - 100);
    text('Version: ' + VERSION, x, y);
    text("Click to continue!", x, y + 200);
    return;
  }
  if (state === 1) {
    push();
    translate(width / 2, height / 2);
    scale(SCALE);
    console.log(round(-cx), round(-cy));
    image(img, round(-cx), round(-cy));
    return pop();
  }
};

touchStarted = function(event) {
  event.preventDefault();
  if (!released) {
    return;
  }
  //speed = 1
  released = false;
  startX = mouseX;
  startY = mouseY;
  return false;
};

touchMoved = function(event) {
  event.preventDefault();
  if (state === 1) {
    cx += (startX - mouseX) / SCALE;
    cy += (startY - mouseY) / SCALE;
    startX = mouseX;
    startY = mouseY;
  }
  return false;
};

touchEnded = function(event) {
  event.preventDefault();
  if (released) {
    return;
  }
  released = true;
  if (state === 0 || state === 2) {
    state = 1;
    return false;
  }
  return false;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoMi5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxza2V0Y2gyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxLQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsa0JBQUEsRUFBQSxPQUFBLEVBQUEsUUFBQSxFQUFBLE1BQUEsRUFBQSxPQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsVUFBQSxFQUFBLFVBQUEsRUFBQTs7QUFBQSxPQUFBLEdBQVU7O0FBRVYsUUFBQSxHQUFXOztBQUNYLE9BQUEsR0FBVSxHQUhWOztBQUlBLE1BQUEsR0FBUzs7QUFFVCxLQUFBLEdBQVEsSUFBSSxJQUFKLENBQUE7O0FBRVIsS0FBQSxHQUFRLEVBUlI7O0FBVUEsSUFBQSxHQUFPOztBQUVQLEdBQUEsR0FBTTs7QUFFTixNQUFBLEdBQVM7O0FBQ1QsTUFBQSxHQUFTOztBQUVULEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBaEIsR0FBd0IsUUFBQSxDQUFBLENBQUE7U0FBRyxJQUFDLENBQUEsTUFBRCxHQUFVO0FBQWI7O0FBRXhCLENBQUMsRUFBRCxFQUFJLEVBQUosQ0FBQSxHQUFVO0VBQUMsQ0FBRDtFQUFHLENBQUg7OztBQUNWLEtBQUEsR0FBUTs7QUFFUixRQUFBLEdBQVcsQ0FBQyxFQUFELEVBQUksRUFBSixFQUFPLEVBQVAsRUFBVSxFQUFWLEVBQWEsRUFBYixFQUFnQixFQUFoQjs7QUFFWCxPQUFBLEdBQVUsUUFBQSxDQUFBLENBQUE7RUFDVCxNQUFBLEdBQVMsYUFBQSxDQUFBO0VBQ1QsT0FBQSxHQUFVLGVBRFg7O1NBR0MsUUFBQSxDQUFTLENBQUEsS0FBQSxDQUFBLENBQVEsT0FBUixDQUFBLEtBQUEsQ0FBVCxFQUFpQyxRQUFBLENBQUMsSUFBRCxDQUFB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QUFTYixVQUFBLEdBQWEsUUFBQSxDQUFDLEtBQUQsQ0FBQTtFQUNaLEtBQUssQ0FBQyxjQUFOLENBQUE7RUFDQSxJQUFHLFFBQUg7QUFBaUIsV0FBakI7O0VBQ0EsUUFBQSxHQUFXO0VBQ1gsSUFBRyxVQUFVLEtBQVYsVUFBWSxDQUFmO0lBQ0MsS0FBQSxHQUFRO0FBQ1IsV0FBTyxNQUZSOztTQUdBO0FBUFkiLCJzb3VyY2VzQ29udGVudCI6WyJWRVJTSU9OID0gMjM2XHJcblxyXG5yZWxlYXNlZCA9IHRydWVcclxubWFwTmFtZSA9IFwiXCIgIyB0IGV4IHNrYXJwbsOkY2tcclxucGFyYW1zID0gbnVsbFxyXG5cclxuc3RhcnQgPSBuZXcgRGF0ZSgpXHJcblxyXG5zdGF0ZSA9IDAgIyAwPXVuaW5pdGlhbGl6ZWQgMT1ub3JtYWwgMj1pbmZvXHJcblxyXG5kYXRhID0gbnVsbFxyXG5cclxuaW1nID0gbnVsbFxyXG5cclxuc3RhcnRYID0gMFxyXG5zdGFydFkgPSAwXHJcblxyXG5BcnJheS5wcm90b3R5cGUuY2xlYXIgPSAtPiBAbGVuZ3RoID0gMFxyXG5cclxuW2N4LGN5XSA9IFswLDBdICMgY2VudGVyIChpbWFnZSBjb29yZGluYXRlcylcclxuU0NBTEUgPSAxXHJcblxyXG5tZXNzYWdlcyA9IFsnJywnJywnJywnJywnJywnJ11cclxuXHJcbnByZWxvYWQgPSAtPlxyXG5cdHBhcmFtcyA9IGdldFBhcmFtZXRlcnMoKVxyXG5cdG1hcE5hbWUgPSBcIjIwMjAtU29tbWFyU1wiXHJcblx0IyBpZiBwYXJhbXMuZGVidWcgdGhlbiBkdW1wLmFjdGl2ZSA9IHBhcmFtcy5kZWJ1ZyA9PSAnMSdcclxuXHRsb2FkSlNPTiBcImRhdGEvI3ttYXBOYW1lfS5qc29uXCIsIChqc29uKSAtPlxyXG5cdFx0ZGF0YSA9IGpzb25cclxuXHRcdGNvbnNvbGUubG9nICdhZGFtJyxkYXRhXHJcblx0XHRmb3Iga2V5LGNvbnRyb2wgb2YgZGF0YS5jb250cm9sc1xyXG5cdFx0XHRjb250cm9sLnB1c2ggXCJcIlxyXG5cdFx0XHRjb250cm9sLnB1c2ggMFxyXG5cdFx0XHRjb250cm9sLnB1c2ggMFxyXG5cdFx0aW1nID0gbG9hZEltYWdlIFwiZGF0YS9cIiArIGRhdGEubWFwXHJcblxyXG5sb2NhdGlvblVwZGF0ZUZhaWwgPSAoZXJyb3IpIC0+XHRpZiBlcnJvci5jb2RlID09IGVycm9yLlBFUk1JU1NJT05fREVOSUVEIHRoZW4gbWVzc2FnZXMgPSBbJycsJycsJycsJycsJycsJ0NoZWNrIGxvY2F0aW9uIHBlcm1pc3Npb25zJ11cclxuXHJcbnNldHVwID0gLT5cclxuXHRjYW52YXMgPSBjcmVhdGVDYW52YXMgaW5uZXJXaWR0aC0wLjAsIGlubmVySGVpZ2h0ICMtMC41XHJcblx0Y2FudmFzLnBvc2l0aW9uIDAsMCAjIGhpZGVzIHRleHQgZmllbGQgdXNlZCBmb3IgY2xpcGJvYXJkIGNvcHkuXHJcblxyXG5cdFNDQUxFID0gZGF0YS5zY2FsZVxyXG5cclxuXHRbY3gsY3ldID0gW2ltZy53aWR0aC8yLGltZy5oZWlnaHQvMl1cclxuXHJcbmRyYXcgPSAtPlxyXG5cdGJnIDAsMSwwXHJcblx0aWYgc3RhdGUgPT0gMCBcclxuXHRcdHRleHRTaXplIDEwMFxyXG5cdFx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHRcdHggPSB3aWR0aC8yXHJcblx0XHR5ID0gaGVpZ2h0LzIgXHJcblx0XHR0ZXh0IG1hcE5hbWUsIHgseS0xMDBcclxuXHRcdHRleHQgJ1ZlcnNpb246ICcrVkVSU0lPTiwgeCx5XHJcblx0XHR0ZXh0IFwiQ2xpY2sgdG8gY29udGludWUhXCIsIHgseSsyMDBcclxuXHRcdHJldHVyblxyXG5cclxuXHRpZiBzdGF0ZSA9PSAxXHJcblx0XHRwdXNoKClcclxuXHRcdHRyYW5zbGF0ZSB3aWR0aC8yLCBoZWlnaHQvMlxyXG5cdFx0c2NhbGUgU0NBTEVcclxuXHRcdGNvbnNvbGUubG9nIHJvdW5kKC1jeCkscm91bmQoLWN5KSBcclxuXHRcdGltYWdlIGltZywgcm91bmQoLWN4KSxyb3VuZCgtY3kpXHJcblx0XHRwb3AoKVxyXG5cclxudG91Y2hTdGFydGVkID0gKGV2ZW50KSAtPlxyXG5cdGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuXHRpZiBub3QgcmVsZWFzZWQgdGhlbiByZXR1cm5cclxuXHQjc3BlZWQgPSAxXHJcblx0cmVsZWFzZWQgPSBmYWxzZVxyXG5cdHN0YXJ0WCA9IG1vdXNlWFxyXG5cdHN0YXJ0WSA9IG1vdXNlWVxyXG5cdGZhbHNlXHJcblxyXG50b3VjaE1vdmVkID0gKGV2ZW50KSAtPlxyXG5cdGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuXHRpZiBzdGF0ZSA9PSAxXHJcblx0XHRjeCArPSAoc3RhcnRYIC0gbW91c2VYKS9TQ0FMRVxyXG5cdFx0Y3kgKz0gKHN0YXJ0WSAtIG1vdXNlWSkvU0NBTEVcclxuXHRcdHN0YXJ0WCA9IG1vdXNlWFxyXG5cdFx0c3RhcnRZID0gbW91c2VZXHJcblx0ZmFsc2VcclxuXHJcbnRvdWNoRW5kZWQgPSAoZXZlbnQpIC0+XHJcblx0ZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cdGlmIHJlbGVhc2VkIHRoZW4gcmV0dXJuXHJcblx0cmVsZWFzZWQgPSB0cnVlXHJcblx0aWYgc3RhdGUgaW4gWzAsMl1cclxuXHRcdHN0YXRlID0gMVxyXG5cdFx0cmV0dXJuIGZhbHNlXHJcblx0ZmFsc2VcclxuIl19
//# sourceURL=c:\github\gpsKarta\coffee\sketch2.coffee