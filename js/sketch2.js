// Generated by CoffeeScript 2.5.1
var DELAY, DIST, LIMIT, SCALE, TRACKED, VERSION, assert, bearingSaid, crossHair, cx, cy, data, distanceSaid, distbc, draw, fraction, general, gps, gpsCount, gpsLat, gpsLon, img, lastTouchEnded, locationUpdateFail, mapName, measure, messages, params, position, preload, released, setup, speaker, speed, start, startX, startY, state, storage, timeout, touchEnded, touchMoved, touchStarted, track, voiceQueue, voices;

VERSION = 230;

DELAY = 100; // ms, delay between sounds

DIST = 1; // meter. Movement less than DIST makes no sound 1=walk. 5=bike

LIMIT = 20; // meter. Under this value is no bearing given.


// platform = window.navigator.platform # Win32|iPad|Linux

// DIGITS = 'zero one two three four five six seven eight niner'.split ' '
//BR = if platform in ['Win32','iPad'] then "\n" else '<br>'
//BR = "\n"

// http://www.bvsok.se/Kartor/Skolkartor/
// Högupplösta orienteringskartor: https://www.omaps.net
// https://omaps.blob.core.windows.net/map-excerpts/1fdc587ffdea489dbd69e29b10b48395.jpeg Nackareservatet utan kontroller.

//DISTLIST = [0,2,4,6,8,10,12,14,16,18,20,30,40,50,60,70,80,90,100, 120,140,160,180,200,250,300,350,400,450,500,600,700,800,900,1000,2000,3000,4000,5000,6000,7000,8000,9000,10000]
released = true;

mapName = ""; // t ex skarpnäck

params = null;

voices = null;

measure = {};

//surplus = 0
//pois = null
speed = 1;

distbc = 0;

start = new Date();

state = 0; // 0=uninitialized 1=normal 2=info

data = null;

img = null;

startX = 0;

startY = 0;

crossHair = null;

lastTouchEnded = new Date(); // to prevent double bounce in menus

fraction = function(x) {
  return x - int(x);
};

Array.prototype.clear = function() {
  return this.length = 0;
};

assert = function(a, b, msg = 'Assert failure') {
  return chai.assert.deepEqual(a, b, msg);
};

general = {
  COINS: true,
  DISTANCE: true,
  TRAIL: true,
  SECTOR: 10,
  PANSPEED: true
};

//loadGeneral = -> if localStorage.gpsKarta then general = _.extend general, JSON.parse localStorage.gpsKarta
//saveGeneral = -> localStorage.gpsKarta = JSON.stringify general
storage = null;

[cx, cy] = [
  0,
  0 // center (image coordinates)
];

SCALE = 1;

gps = null;

TRACKED = 5; // circles shows the user position

position = null; // gps position [x,y] # [lon,lat,alt,hhmmss]

track = []; // five latest GPS positions (bitmap coordinates)

speaker = null;

//soundUp = null
//soundDown = null
//soundQueue = 0 # integer neg=minskat avstånd pos=ökat avstånd
messages = ['', '', '', '', '', ''];

gpsCount = 0;

[gpsLat, gpsLon] = [
  0,
  0 // avgör om muntlig information ska ges
];

timeout = null;

voiceQueue = [];

bearingSaid = ''; // förhindrar upprepning

distanceSaid = ''; // förhindrar upprepning

preload = function() {
  params = getParameters();
  mapName = params.map || "2023-SommarS";
  // if params.debug then dump.active = params.debug == '1'
  return loadJSON(`data/${mapName}.json`, function(json) {
    var control, key, ref;
    data = json;
    console.log('adam', data);
    ref = data.controls;
    for (key in ref) {
      control = ref[key];
      control.push("");
      control.push(0);
      control.push(0);
    }
    return img = loadImage("data/" + data.map);
  });
};

//loadJSON "data/poi.json", (json) -> pois = json
locationUpdateFail = function(error) {
  if (error.code === error.PERMISSION_DENIED) {
    return messages = ['', '', '', '', '', 'Check location permissions'];
  }
};

window.speechSynthesis.onvoiceschanged = function() {
  return voices = window.speechSynthesis.getVoices();
};

setup = function() {
  var abc, bmp, canvas, dcs, wgs;
  canvas = createCanvas(innerWidth - 0.0, innerHeight); //-0.5
  canvas.position(0, 0); // hides text field used for clipboard copy.
  angleMode(DEGREES);
  SCALE = data.scale;
  dcs = data.controls;
  bmp = [dcs.A[0], dcs.A[1], dcs.B[0], dcs.B[1], dcs.C[0], dcs.C[1]];
  abc = data.ABC;
  wgs = [abc[1], abc[0], abc[3], abc[2], abc[5], abc[4]];
  return [cx, cy] = [img.width / 2, img.height / 2];
};

draw = function() {
  var x, y;
  bg(0, 1, 0);
  if (state === 0) {
    textSize(100);
    textAlign(CENTER, CENTER);
    x = width / 2;
    y = height / 2;
    text(mapName, x, y - 100);
    text('Version: ' + VERSION, x, y);
    text("Click to continue!", x, y + 200);
    return;
  }
  if (state === 1) {
    push();
    translate(width / 2, height / 2);
    scale(SCALE);
    image(img, -cx, -cy);
    return pop();
  }
};

touchStarted = function(event) {
  //lastTouchStarted = new Date()
  event.preventDefault();
  if (!released) {
    return;
  }
  speed = 1;
  released = false;
  startX = mouseX;
  startY = mouseY;
  return false;
};

touchMoved = function(event) {
  event.preventDefault();
  if (state === 1) {
    cx += speed * (startX - mouseX) / SCALE;
    cy += speed * (startY - mouseY) / SCALE;
    startX = mouseX;
    startY = mouseY;
  }
  return false;
};

touchEnded = function(event) {
  event.preventDefault();
  // if (new Date()) - lastTouchEnded < 500
  // 	lastTouchEnded = new Date()
  // 	return # to prevent double bounce
  if (released) {
    return;
  }
  // cx += speed * (startX - mouseX)/SCALE
  // cy += speed * (startY - mouseY)/SCALE
  // startX = mouseX
  // startY = mouseY
  released = true;
  if (state === 0 || state === 2) {
    state = 1;
    return false;
  }
  return false;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoMi5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxza2V0Y2gyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsV0FBQSxFQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsY0FBQSxFQUFBLGtCQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLFFBQUEsRUFBQSxPQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLFVBQUEsRUFBQSxVQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxVQUFBLEVBQUE7O0FBQUEsT0FBQSxHQUFVOztBQUVWLEtBQUEsR0FBUSxJQUZSOztBQUdBLElBQUEsR0FBTyxFQUhQOztBQUlBLEtBQUEsR0FBUSxHQUpSOzs7Ozs7Ozs7Ozs7OztBQWtCQSxRQUFBLEdBQVc7O0FBQ1gsT0FBQSxHQUFVLEdBbkJWOztBQW9CQSxNQUFBLEdBQVM7O0FBQ1QsTUFBQSxHQUFTOztBQUNULE9BQUEsR0FBVSxDQUFBLEVBdEJWOzs7O0FBeUJBLEtBQUEsR0FBUTs7QUFDUixNQUFBLEdBQVM7O0FBRVQsS0FBQSxHQUFRLElBQUksSUFBSixDQUFBOztBQUVSLEtBQUEsR0FBUSxFQTlCUjs7QUFnQ0EsSUFBQSxHQUFPOztBQUVQLEdBQUEsR0FBTTs7QUFFTixNQUFBLEdBQVM7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QUFmO0lBQ0MsS0FBQSxHQUFRO0FBQ1IsV0FBTyxNQUZSOztTQUdBO0FBbEJZIiwic291cmNlc0NvbnRlbnQiOlsiVkVSU0lPTiA9IDIzMFxyXG5cclxuREVMQVkgPSAxMDAgIyBtcywgZGVsYXkgYmV0d2VlbiBzb3VuZHNcclxuRElTVCA9IDEgIyBtZXRlci4gTW92ZW1lbnQgbGVzcyB0aGFuIERJU1QgbWFrZXMgbm8gc291bmQgMT13YWxrLiA1PWJpa2VcclxuTElNSVQgPSAyMCAjIG1ldGVyLiBVbmRlciB0aGlzIHZhbHVlIGlzIG5vIGJlYXJpbmcgZ2l2ZW4uXHJcblxyXG4jIHBsYXRmb3JtID0gd2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSAjIFdpbjMyfGlQYWR8TGludXhcclxuXHJcbiMgRElHSVRTID0gJ3plcm8gb25lIHR3byB0aHJlZSBmb3VyIGZpdmUgc2l4IHNldmVuIGVpZ2h0IG5pbmVyJy5zcGxpdCAnICdcclxuI0JSID0gaWYgcGxhdGZvcm0gaW4gWydXaW4zMicsJ2lQYWQnXSB0aGVuIFwiXFxuXCIgZWxzZSAnPGJyPidcclxuI0JSID0gXCJcXG5cIlxyXG5cclxuIyBodHRwOi8vd3d3LmJ2c29rLnNlL0thcnRvci9Ta29sa2FydG9yL1xyXG4jIEjDtmd1cHBsw7ZzdGEgb3JpZW50ZXJpbmdza2FydG9yOiBodHRwczovL3d3dy5vbWFwcy5uZXRcclxuIyBodHRwczovL29tYXBzLmJsb2IuY29yZS53aW5kb3dzLm5ldC9tYXAtZXhjZXJwdHMvMWZkYzU4N2ZmZGVhNDg5ZGJkNjllMjliMTBiNDgzOTUuanBlZyBOYWNrYXJlc2VydmF0ZXQgdXRhbiBrb250cm9sbGVyLlxyXG5cclxuI0RJU1RMSVNUID0gWzAsMiw0LDYsOCwxMCwxMiwxNCwxNiwxOCwyMCwzMCw0MCw1MCw2MCw3MCw4MCw5MCwxMDAsIDEyMCwxNDAsMTYwLDE4MCwyMDAsMjUwLDMwMCwzNTAsNDAwLDQ1MCw1MDAsNjAwLDcwMCw4MDAsOTAwLDEwMDAsMjAwMCwzMDAwLDQwMDAsNTAwMCw2MDAwLDcwMDAsODAwMCw5MDAwLDEwMDAwXVxyXG5cclxucmVsZWFzZWQgPSB0cnVlXHJcbm1hcE5hbWUgPSBcIlwiICMgdCBleCBza2FycG7DpGNrXHJcbnBhcmFtcyA9IG51bGxcclxudm9pY2VzID0gbnVsbFxyXG5tZWFzdXJlID0ge31cclxuI3N1cnBsdXMgPSAwXHJcbiNwb2lzID0gbnVsbFxyXG5zcGVlZCA9IDFcclxuZGlzdGJjID0gMFxyXG5cclxuc3RhcnQgPSBuZXcgRGF0ZSgpXHJcblxyXG5zdGF0ZSA9IDAgIyAwPXVuaW5pdGlhbGl6ZWQgMT1ub3JtYWwgMj1pbmZvXHJcblxyXG5kYXRhID0gbnVsbFxyXG5cclxuaW1nID0gbnVsbFxyXG5cclxuc3RhcnRYID0gMFxyXG5zdGFydFkgPSAwXHJcblxyXG5jcm9zc0hhaXIgPSBudWxsXHJcbmxhc3RUb3VjaEVuZGVkID0gbmV3IERhdGUoKSAjIHRvIHByZXZlbnQgZG91YmxlIGJvdW5jZSBpbiBtZW51c1xyXG5cclxuZnJhY3Rpb24gPSAoeCkgLT4geCAtIGludCB4IFxyXG5BcnJheS5wcm90b3R5cGUuY2xlYXIgPSAtPiBAbGVuZ3RoID0gMFxyXG5hc3NlcnQgPSAoYSwgYiwgbXNnPSdBc3NlcnQgZmFpbHVyZScpIC0+IGNoYWkuYXNzZXJ0LmRlZXBFcXVhbCBhLCBiLCBtc2dcclxuXHJcbmdlbmVyYWwgPSB7Q09JTlM6IHRydWUsIERJU1RBTkNFOiB0cnVlLCBUUkFJTDogdHJ1ZSwgU0VDVE9SOiAxMCwgUEFOU1BFRUQgOiB0cnVlfVxyXG4jbG9hZEdlbmVyYWwgPSAtPiBpZiBsb2NhbFN0b3JhZ2UuZ3BzS2FydGEgdGhlbiBnZW5lcmFsID0gXy5leHRlbmQgZ2VuZXJhbCwgSlNPTi5wYXJzZSBsb2NhbFN0b3JhZ2UuZ3BzS2FydGFcclxuI3NhdmVHZW5lcmFsID0gLT4gbG9jYWxTdG9yYWdlLmdwc0thcnRhID0gSlNPTi5zdHJpbmdpZnkgZ2VuZXJhbFxyXG5cclxuc3RvcmFnZSA9IG51bGxcclxuXHJcbltjeCxjeV0gPSBbMCwwXSAjIGNlbnRlciAoaW1hZ2UgY29vcmRpbmF0ZXMpXHJcblNDQUxFID0gMVxyXG5cclxuZ3BzID0gbnVsbFxyXG5UUkFDS0VEID0gNSAjIGNpcmNsZXMgc2hvd3MgdGhlIHVzZXIgcG9zaXRpb25cclxucG9zaXRpb24gPSBudWxsICMgZ3BzIHBvc2l0aW9uIFt4LHldICMgW2xvbixsYXQsYWx0LGhobW1zc11cclxudHJhY2sgPSBbXSAjIGZpdmUgbGF0ZXN0IEdQUyBwb3NpdGlvbnMgKGJpdG1hcCBjb29yZGluYXRlcylcclxuXHJcbnNwZWFrZXIgPSBudWxsXHJcblxyXG4jc291bmRVcCA9IG51bGxcclxuI3NvdW5kRG93biA9IG51bGxcclxuI3NvdW5kUXVldWUgPSAwICMgaW50ZWdlciBuZWc9bWluc2thdCBhdnN0w6VuZCBwb3M9w7ZrYXQgYXZzdMOlbmRcclxuXHJcbm1lc3NhZ2VzID0gWycnLCcnLCcnLCcnLCcnLCcnXVxyXG5ncHNDb3VudCA9IDBcclxuXHJcbltncHNMYXQsZ3BzTG9uXSA9IFswLDBdICMgYXZnw7ZyIG9tIG11bnRsaWcgaW5mb3JtYXRpb24gc2thIGdlc1xyXG5cclxudGltZW91dCA9IG51bGxcclxuXHJcbnZvaWNlUXVldWUgPSBbXVxyXG5iZWFyaW5nU2FpZCA9ICcnICMgZsO2cmhpbmRyYXIgdXBwcmVwbmluZ1xyXG5kaXN0YW5jZVNhaWQgPSAnJyAjIGbDtnJoaW5kcmFyIHVwcHJlcG5pbmdcclxuXHJcbnByZWxvYWQgPSAtPlxyXG5cdHBhcmFtcyA9IGdldFBhcmFtZXRlcnMoKVxyXG5cdG1hcE5hbWUgPSBwYXJhbXMubWFwIHx8IFwiMjAyMy1Tb21tYXJTXCJcclxuXHQjIGlmIHBhcmFtcy5kZWJ1ZyB0aGVuIGR1bXAuYWN0aXZlID0gcGFyYW1zLmRlYnVnID09ICcxJ1xyXG5cdGxvYWRKU09OIFwiZGF0YS8je21hcE5hbWV9Lmpzb25cIiwgKGpzb24pIC0+XHJcblx0XHRkYXRhID0ganNvblxyXG5cdFx0Y29uc29sZS5sb2cgJ2FkYW0nLGRhdGFcclxuXHRcdGZvciBrZXksY29udHJvbCBvZiBkYXRhLmNvbnRyb2xzXHJcblx0XHRcdGNvbnRyb2wucHVzaCBcIlwiXHJcblx0XHRcdGNvbnRyb2wucHVzaCAwXHJcblx0XHRcdGNvbnRyb2wucHVzaCAwXHJcblx0XHRpbWcgPSBsb2FkSW1hZ2UgXCJkYXRhL1wiICsgZGF0YS5tYXBcclxuXHQjbG9hZEpTT04gXCJkYXRhL3BvaS5qc29uXCIsIChqc29uKSAtPiBwb2lzID0ganNvblxyXG5cclxubG9jYXRpb25VcGRhdGVGYWlsID0gKGVycm9yKSAtPlx0aWYgZXJyb3IuY29kZSA9PSBlcnJvci5QRVJNSVNTSU9OX0RFTklFRCB0aGVuIG1lc3NhZ2VzID0gWycnLCcnLCcnLCcnLCcnLCdDaGVjayBsb2NhdGlvbiBwZXJtaXNzaW9ucyddXHJcbndpbmRvdy5zcGVlY2hTeW50aGVzaXMub252b2ljZXNjaGFuZ2VkID0gLT4gdm9pY2VzID0gd2luZG93LnNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKVxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNhbnZhcyA9IGNyZWF0ZUNhbnZhcyBpbm5lcldpZHRoLTAuMCwgaW5uZXJIZWlnaHQgIy0wLjVcclxuXHRjYW52YXMucG9zaXRpb24gMCwwICMgaGlkZXMgdGV4dCBmaWVsZCB1c2VkIGZvciBjbGlwYm9hcmQgY29weS5cclxuXHJcblx0YW5nbGVNb2RlIERFR1JFRVNcclxuXHRTQ0FMRSA9IGRhdGEuc2NhbGVcclxuXHJcblx0ZGNzID0gZGF0YS5jb250cm9sc1xyXG5cdGJtcCA9IFtkY3MuQVswXSwgZGNzLkFbMV0sIGRjcy5CWzBdLCBkY3MuQlsxXSwgZGNzLkNbMF0sIGRjcy5DWzFdXVxyXG5cdGFiYyA9IGRhdGEuQUJDXHJcblx0d2dzID0gW2FiY1sxXSxhYmNbMF0sYWJjWzNdLGFiY1syXSxhYmNbNV0sYWJjWzRdXSAjIGxhdCBsb24gPD0+IGxvbiBsYXRcclxuXHJcblx0W2N4LGN5XSA9IFtpbWcud2lkdGgvMixpbWcuaGVpZ2h0LzJdXHJcblxyXG5kcmF3ID0gLT5cclxuXHRiZyAwLDEsMFxyXG5cdGlmIHN0YXRlID09IDAgXHJcblx0XHR0ZXh0U2l6ZSAxMDBcclxuXHRcdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0XHR4ID0gd2lkdGgvMlxyXG5cdFx0eSA9IGhlaWdodC8yIFxyXG5cdFx0dGV4dCBtYXBOYW1lLCB4LHktMTAwXHJcblx0XHR0ZXh0ICdWZXJzaW9uOiAnK1ZFUlNJT04sIHgseVxyXG5cdFx0dGV4dCBcIkNsaWNrIHRvIGNvbnRpbnVlIVwiLCB4LHkrMjAwXHJcblx0XHRyZXR1cm5cclxuXHJcblx0aWYgc3RhdGUgPT0gMVxyXG5cdFx0cHVzaCgpXHJcblx0XHR0cmFuc2xhdGUgd2lkdGgvMiwgaGVpZ2h0LzJcclxuXHRcdHNjYWxlIFNDQUxFXHJcblx0XHRpbWFnZSBpbWcsIC1jeCwtY3lcclxuXHRcdHBvcCgpXHJcblxyXG50b3VjaFN0YXJ0ZWQgPSAoZXZlbnQpIC0+XHJcblx0I2xhc3RUb3VjaFN0YXJ0ZWQgPSBuZXcgRGF0ZSgpXHJcblx0ZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cdGlmIG5vdCByZWxlYXNlZCB0aGVuIHJldHVyblxyXG5cdHNwZWVkID0gMVxyXG5cdHJlbGVhc2VkID0gZmFsc2VcclxuXHRzdGFydFggPSBtb3VzZVhcclxuXHRzdGFydFkgPSBtb3VzZVlcclxuXHJcblx0ZmFsc2VcclxuXHJcbnRvdWNoTW92ZWQgPSAoZXZlbnQpIC0+XHJcblx0ZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cdGlmIHN0YXRlID09IDFcclxuXHRcdGN4ICs9IHNwZWVkICogKHN0YXJ0WCAtIG1vdXNlWCkvU0NBTEVcclxuXHRcdGN5ICs9IHNwZWVkICogKHN0YXJ0WSAtIG1vdXNlWSkvU0NBTEVcclxuXHRcdHN0YXJ0WCA9IG1vdXNlWFxyXG5cdFx0c3RhcnRZID0gbW91c2VZXHJcblx0ZmFsc2VcclxuXHJcbnRvdWNoRW5kZWQgPSAoZXZlbnQpIC0+XHJcblx0ZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuXHQjIGlmIChuZXcgRGF0ZSgpKSAtIGxhc3RUb3VjaEVuZGVkIDwgNTAwXHJcblx0IyBcdGxhc3RUb3VjaEVuZGVkID0gbmV3IERhdGUoKVxyXG5cdCMgXHRyZXR1cm4gIyB0byBwcmV2ZW50IGRvdWJsZSBib3VuY2VcclxuXHRpZiByZWxlYXNlZCB0aGVuIHJldHVyblxyXG5cclxuXHQjIGN4ICs9IHNwZWVkICogKHN0YXJ0WCAtIG1vdXNlWCkvU0NBTEVcclxuXHQjIGN5ICs9IHNwZWVkICogKHN0YXJ0WSAtIG1vdXNlWSkvU0NBTEVcclxuXHQjIHN0YXJ0WCA9IG1vdXNlWFxyXG5cdCMgc3RhcnRZID0gbW91c2VZXHJcblxyXG5cclxuXHRyZWxlYXNlZCA9IHRydWVcclxuXHRpZiBzdGF0ZSBpbiBbMCwyXVxyXG5cdFx0c3RhdGUgPSAxXHJcblx0XHRyZXR1cm4gZmFsc2VcclxuXHRmYWxzZVxyXG4iXX0=
//# sourceURL=c:\github\gpsKarta\coffee\sketch2.coffee