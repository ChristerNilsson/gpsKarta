{
  "version": 3,
  "file": "dialogue.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\dialogue.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "dialogues = []\r\n\r\ncalcr1r2 = (n,w,h) ->\r\n\ts = Math.min w,h\r\n\tr2 = s/7\r\n\tr1 = s/3\r\n\tif n > 6 then r2 *= 7/n\r\n\t[Math.round(r1),Math.round(r2)]\r\nassert [200,86], calcr1r2 4,600,800\r\nassert [200,75], calcr1r2 8,600,800\r\n\r\nclass Dialogue \r\n\r\n\tconstructor : (@x = width/2, @y = height/2) -> \r\n\t\t@col = '#ff06'\r\n\t\t@buttons = []\r\n\t\tdialogues.push @\r\n\r\n\tadd : (prompt,event) -> @buttons.push new Button @,prompt,event\r\n\r\n\tclock : (title= ' ', @backPop=false, turn=0) ->\r\n\t\tn = @buttons.length\r\n\t\t[r1,r2] = calcr1r2 n,width,height\r\n\t\tfor button,i in @buttons\r\n\t\t\tv = i*360/n + turn - 90\r\n\t\t\tbutton.x = r1*cos v\r\n\t\t\tbutton.y = r1*sin v\r\n\t\t\tbutton.r = r2\r\n\t\tbutton = new Button @, title, -> \r\n\t\t\tif @dlg.backPop then dialogues.pop() else dialogues.clear()\r\n\t\tbutton.x = 0\r\n\t\tbutton.y = 0\r\n\t\tbutton.r = r2\r\n\t\t@buttons.push button\r\n\t\tchars = _.max (button.title.length for button in @buttons)\r\n\t\t@textSize = if chars == 1 then 0.75*r2 else 2.5*r2/chars\r\n\r\n\tupdate : (delta) -> # -1 eller +1\r\n\t\tif 0 <= @pageStart + delta * @pageSize < @lst.length\r\n\t\t\t@pageStart += delta * @pageSize\r\n\t\t\tfor i in range @pageSize\r\n\t\t\t\tif @pageStart + i < @lst.length\r\n\t\t\t\t\t@buttons[i].arr = @lst[@pageStart + i] \r\n\t\t\t\telse\r\n\t\t\t\t\t@buttons[i].arr = []\r\n\r\n\tlist : (@lst, @pageSize=10, @backPop=true, click = (arr) -> print arr[0]) ->\r\n\t\t@pageStart = 0\r\n\t\tn = @pageSize\r\n\t\tx = 0\r\n\t\tw = width\r\n\t\th = height/(@pageSize+1)\r\n\t\t@buttons.clear()\r\n\t\tfor i in range @pageStart,@pageStart + n\r\n\t\t\tif i < @lst.length\r\n\t\t\t\titem = @lst[i]\r\n\t\t\t\ty = i*h\r\n\t\t\t\tdo (item) => @buttons.push new RectButton @, item, x,y,w,h, -> click @arr\r\n\t\t@buttons.push new RectButton @, ['Prev'], 0*w/3,h*n, w/3,h, -> @dlg.update -1 \r\n\t\t@buttons.push new RectButton @, ['Cancel'], 1*w/3,h*n, w/3,h, -> \r\n\t\t\tif @dlg.backPop then dialogues.pop() else dialogues.clear()\r\n\t\t@buttons.push new RectButton @, ['Next'], 2*w/3,h*n, w/3,h, -> @dlg.update +1 \r\n\r\n\tshow : ->\r\n\t\tpush()\r\n\t\ttranslate @x,@y\r\n\t\ttextSize @textSize\r\n\t\tfor button in @buttons\r\n\t\t\tbutton.show @\r\n\t\tpop()\r\n\r\n\texecute : (mx,my) ->\r\n\t\tfor button in @buttons\r\n\t\t\tif button.inside mx,my,@\r\n\t\t\t\tbutton.execute()\r\n\t\t\t\treturn true\r\n\t\tfalse \r\n\r\nclass Button \r\n\tconstructor : (@dlg, @title, @event = -> print @txt) -> @active = true \r\n\tinfo : (@title,@event) -> @active = true\r\n\tshow : ->\r\n\t\tif @active then fill @dlg.col else fill \"#fff8\"\r\n\t\tstroke 0\r\n\t\tellipse @x,@y,2*@r,2*@r\r\n\t\tpush()\r\n\t\tif @active then fill 0 else fill \"#888\"\r\n\t\tnoStroke()\r\n\t\ttextAlign CENTER,CENTER\r\n\t\ttextSize @dlg.textSize\r\n\t\tarr = @title.split ' '\r\n\t\tif arr.length == 1 \r\n\t\t\ttext arr[0], @x,@y\r\n\t\telse \r\n\t\t\ttext arr[0], @x,@y-0.3*@r\r\n\t\t\ttext arr[1], @x,@y+0.3*@r\r\n\t\tpop()\r\n\r\n\tinside : (mx,my) ->  @r > dist mx, my, @dlg.x + @x, @dlg.y + @y \r\n\texecute : -> if @active then @event()\r\n\r\nclass RectButton \r\n\tconstructor : (@dlg, @arr, @x, @y, @w, @h, @event = -> print @item) -> @active = true \r\n\tinfo : (@arr,@event) -> @active = true\r\n\tshow : ->\r\n\t\tif @active then fill @dlg.col else fill \"#fff8\"\r\n\t\tstroke 0\r\n\t\trect @x,@y,@w,@h\r\n\t\tpush()\r\n\t\tif @active then fill 0 else fill \"#888\"\r\n\t\tnoStroke()\r\n\t\ttextSize @dlg.textSize\r\n\t\tif @arr.length == 1\r\n\t\t\ttextAlign CENTER,CENTER\r\n\t\t\ttext @arr[0], @x+@w/2,@y+@h/2\t\t\t\r\n\t\tif @arr.length == 2\r\n\t\t\ttextAlign LEFT,CENTER\r\n\t\t\ttext @arr[0], @x+10,@y+@h/2\r\n\t\t\ttextAlign RIGHT,CENTER\r\n\t\t\ttext @arr[1], @x+@w-10,@y+@h/2\r\n\t\tif @arr.length == 3\r\n\t\t\ttextAlign LEFT,CENTER\r\n\t\t\ttext @arr[0], @x+10,@y+@h/2\r\n\t\t\ttextAlign CENTER,CENTER\r\n\t\t\ttext @arr[1], @x+@w/2,@y+@h/2\t\t\t\r\n\t\t\ttextAlign RIGHT,CENTER\r\n\t\t\ttext @arr[2], @x+@w-10,@y+@h/2\r\n\t\telse\r\n\t\tpop()\r\n\r\n\tinside : (mx,my) ->  @x < mx < @x+@w and @y < my < @y+@h\r\n\texecute : -> if @active then @event()\r\n"
  ]
}